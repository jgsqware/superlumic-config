---

- name: Install Homebrew Cask Applications
  homebrew_cask: name={{item}} state=present
  with_items:
    - java

- name: Install Homebrew Applications
  homebrew: name={{item}} state=present
  with_items:
    - groovy

- name: Set Environnement Variable for Groovy
  lineinfile: dest=~/.zshrc regexp='export GROOVY_HOME=/usr/local/opt/groovy/libexec' insertafter='^# User configuration' line='export GROOVY_HOME=/usr/local/opt/groovy/libexec' state=present

# - include: jenkins.yml
# # Make sure Jenkins starts, then configure Jenkins.
# - name: Ensure Jenkins is started and runs on startup.
#   service: name=jenkins state=started enabled=yes
#
# - name: Wait for Jenkins to start up before proceeding.
#   shell: "curl -D - --silent http://{{ jenkins_hostname }}:8080{{ jenkins_url_prefix }}/cli/"
#   register: result
#   until: (result.stdout.find("200 OK") != -1) and (result.stdout.find("Please wait while") == -1)
#   retries: "5"
#   delay: "60"
#   changed_when: false
