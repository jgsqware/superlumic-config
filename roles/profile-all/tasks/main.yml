---

- name: install general applications with Cask
  homebrew_cask: name={{item}} state=present
  with_items:
    - atom
    - iterm2
    - google-chrome

- name: install general applications with brew
  homebrew: name={{item}} state=present
  with_items:
    - wget
    - dockutil

- name: Update git config url
  shell: git config --global url."https://".insteadOf git://

- osx_defaults: domain="{{ item.domain }}" key="{{ item.key }}" type="{{ item.type }}" value="{{ item.value }}" state=present
  with_items: osx_defaults_present

# - osx_defaults: domain="{{ item.domain }}" key="{{ item.key }}" type="{{ item.type }}" value="{{ item.value }}" state=absent
#   with_items: osx_defaults_absent

- name: Set Icons to Dock
  command: dockutil --add "/Applications/{{item}}.app" --allhomes
  with_items: dock_icons

- name: Remove Icons from Dock
  command: dockutil --remove "{{item}}" --allhomes
  with_items: dock_icons_to_delete
